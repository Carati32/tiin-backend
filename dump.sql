CREATE DATABASE senai;
USE senai;

CREATE TABLE usuario(
    id INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(100),
    idade INT,
    email VARCHAR(100) UNIQUE,
    senha VARCHAR(100)
);



INSERT INTO usuario (nome, idade, email, senha) VALUES
('Ana Souza', 23, 'ana.souza1@email.com', 'senha123'),
('Bruno Lima', 31, 'bruno.lima2@email.com', 'senha123'),
('Carlos Mendes', 28, 'carlos.mendes3@email.com', 'senha123'),
('Daniela Rocha', 35, 'daniela.rocha4@email.com', 'senha123'),
('Eduardo Silva', 26, 'eduardo.silva5@email.com', 'senha123'),
('Fernanda Alves', 22, 'fernanda.alves6@email.com', 'senha123'),
('Gabriel Costa', 29, 'gabriel.costa7@email.com', 'senha123'),
('Helena Martins', 27, 'helena.martins8@email.com', 'senha123'),
('Igor Ferreira', 33, 'igor.ferreira9@email.com', 'senha123'),
('Julia Santos', 24, 'julia.santos10@email.com', 'senha123'),
('Kleber Souza', 38, 'kleber.souza11@email.com', 'senha123'),
('Laura Oliveira', 30, 'laura.oliveira12@email.com', 'senha123'),
('Marcelo Pinto', 25, 'marcelo.pinto13@email.com', 'senha123'),
('Natalia Ribeiro', 21, 'natalia.ribeiro14@email.com', 'senha123'),
('Otavio Gomes', 40, 'otavio.gomes15@email.com', 'senha123'),
('Patricia Nunes', 34, 'patricia.nunes16@email.com', 'senha123'),
('Rafael Almeida', 37, 'rafael.almeida17@email.com', 'senha123'),
('Sabrina Moreira', 28, 'sabrina.moreira18@email.com', 'senha123'),
('Tiago Melo', 32, 'tiago.melo19@email.com', 'senha123'),
('Ursula Carvalho', 26, 'ursula.carvalho20@email.com', 'senha123'),
('Victor Barros', 23, 'victor.barros21@email.com', 'senha123'),
('Wesley Farias', 29, 'wesley.farias22@email.com', 'senha123'),
('Xavier Ramos', 41, 'xavier.ramos23@email.com', 'senha123'),
('Yasmin Lopes', 20, 'yasmin.lopes24@email.com', 'senha123'),
('Zeca Moura', 36, 'zeca.moura25@email.com', 'senha123'),
('Alice Freitas', 24, 'alice.freitas26@email.com', 'senha123'),
('Bruna Castro', 27, 'bruna.castro27@email.com', 'senha123'),
('Caio Pires', 35, 'caio.pires28@email.com', 'senha123'),
('Denise Costa', 30, 'denise.costa29@email.com', 'senha123'),
('Elias Moraes', 39, 'elias.moraes30@email.com', 'senha123'),
('Fabiana Duarte', 25, 'fabiana.duarte31@email.com', 'senha123'),
('Gustavo Lopes', 22, 'gustavo.lopes32@email.com', 'senha123'),
('Heloisa Braga', 28, 'heloisa.braga33@email.com', 'senha123'),
('Ingrid Paiva', 33, 'ingrid.paiva34@email.com', 'senha123'),
('João Ricardo', 26, 'joao.ricardo35@email.com', 'senha123'),
('Karen Teixeira', 31, 'karen.teixeira36@email.com', 'senha123'),
('Leandro Batista', 29, 'leandro.batista37@email.com', 'senha123'),
('Mariana Dias', 20, 'mariana.dias38@email.com', 'senha123'),
('Nicolas Azevedo', 27, 'nicolas.azevedo39@email.com', 'senha123'),
('Olivia Prado', 24, 'olivia.prado40@email.com', 'senha123'),
('Paulo Serra', 38, 'paulo.serra41@email.com', 'senha123'),
('Renata Campos', 32, 'renata.campos42@email.com', 'senha123'),
('Samuel Tavares', 23, 'samuel.tavares43@email.com', 'senha123'),
('Tatiane Pacheco', 25, 'tatiane.pacheco44@email.com', 'senha123'),
('Uelton Cruz', 40, 'uelton.cruz45@email.com', 'senha123'),
('Vera Fonseca', 36, 'vera.fonseca46@email.com', 'senha123'),
('William Souza', 34, 'william.souza47@email.com', 'senha123'),
('Ximena Duarte', 22, 'ximena.duarte48@email.com', 'senha123'),
('Yago Lemos', 28, 'yago.lemos49@email.com', 'senha123'),
('Zilda Rocha', 27, 'zilda.rocha50@email.com', 'senha123'),
('Alan Figueiredo', 30, 'alan.figueiredo51@email.com', 'senha123'),
('Beatriz Ramos', 21, 'beatriz.ramos52@email.com', 'senha123'),
('Claudio Nogueira', 33, 'claudio.nogueira53@email.com', 'senha123'),
('Diana Ferreira', 25, 'diana.ferreira54@email.com', 'senha123'),
('Emerson Lima', 31, 'emerson.lima55@email.com', 'senha123'),
('Fabio Moreira', 37, 'fabio.moreira56@email.com', 'senha123'),
('Giovana Prado', 29, 'giovana.prado57@email.com', 'senha123'),
('Henrique Reis', 24, 'henrique.reis58@email.com', 'senha123'),
('Isabela Rocha', 35, 'isabela.rocha59@email.com', 'senha123'),
('Joana Lima', 23, 'joana.lima60@email.com', 'senha123'),
('Kelvin Duarte', 38, 'kelvin.duarte61@email.com', 'senha123'),
('Livia Mendes', 26, 'livia.mendes62@email.com', 'senha123'),
('Murilo Santos', 28, 'murilo.santos63@email.com', 'senha123'),
('Nicole Andrade', 22, 'nicole.andrade64@email.com', 'senha123'),
('Otávia Martins', 27, 'otavia.martins65@email.com', 'senha123'),
('Pedro Henrique', 30, 'pedro.henrique66@email.com', 'senha123'),
('Queila Pires', 25, 'queila.pires67@email.com', 'senha123'),
('Rafaela Almeida', 29, 'rafaela.almeida68@email.com', 'senha123'),
('Silvio Lima', 33, 'silvio.lima69@email.com', 'senha123'),
('Tainá Souza', 24, 'taina.souza70@email.com', 'senha123'),
('Ubirajara Nunes', 41, 'ubirajara.nunes71@email.com', 'senha123'),
('Valeria Costa', 27, 'valeria.costa72@email.com', 'senha123'),
('Wagner Duarte', 36, 'wagner.duarte73@email.com', 'senha123'),
('Xuxa Menezes', 39, 'xuxa.menezes74@email.com', 'senha123'),
('Yuri Gonçalves', 32, 'yuri.goncalves75@email.com', 'senha123'),
('Zuleide Braga', 34, 'zuleide.braga76@email.com', 'senha123'),
('Arthur Campos', 28, 'arthur.campos77@email.com', 'senha123'),
('Bianca Torres', 22, 'bianca.torres78@email.com', 'senha123'),
('Cesar Moraes', 25, 'cesar.moraes79@email.com', 'senha123'),
('Debora Farias', 31, 'debora.farias80@email.com', 'senha123'),
('Edson Costa', 37, 'edson.costa81@email.com', 'senha123'),
('Flavia Gomes', 23, 'flavia.gomes82@email.com', 'senha123'),
('Guilherme Rocha', 33, 'guilherme.rocha83@email.com', 'senha123'),
('Helio Ferreira', 35, 'helio.ferreira84@email.com', 'senha123'),
('Iara Oliveira', 21, 'iara.oliveira85@email.com', 'senha123'),
('Jonas Souza', 26, 'jonas.souza86@email.com', 'senha123'),
('Karen Ribeiro', 27, 'karen.ribeiro87@email.com', 'senha123'),
('Leonardo Alves', 29, 'leonardo.alves88@email.com', 'senha123'),
('Mirela Freitas', 24, 'mirela.freitas89@email.com', 'senha123'),
('Natanael Lima', 38, 'natanael.lima90@email.com', 'senha123'),
('Orlando Pires', 40, 'orlando.pires91@email.com', 'senha123'),
('Priscila Duarte', 28, 'priscila.duarte92@email.com', 'senha123'),
('Renato Rocha', 35, 'renato.rocha93@email.com', 'senha123'),
('Simone Nogueira', 30, 'simone.nogueira94@email.com', 'senha123'),
('Talita Ribeiro', 25, 'talita.ribeiro95@email.com', 'senha123'),
('Ubiraci Souza', 33, 'ubiraci.souza96@email.com', 'senha123'),
('Vitor Almeida', 26, 'vitor.almeida97@email.com', 'senha123'),
('Waldir Silva', 39, 'waldir.silva98@email.com', 'senha123'),
('Xenia Tavares', 23, 'xenia.tavares99@email.com', 'senha123'),
('Yvone Mendes', 31, 'yvone.mendes100@email.com', 'senha123');
SELECT * FROM usuario; 

CREATE TABLE lgs (
	id INT PRIMARY KEY AUTO_INCREMENT,
	categoria TEXT,
    horas_trabalhadas INT,
    linhas_codigo INT,
    bugs_corrigidos INT,
    id_user INT,
    FOREIGN KEY (id_user) 
    REFERENCES usuario(id)
    ON DELETE CASCADE
    ON UPDATE CASCADE
);


INSERT INTO lgs (categoria, horas_trabalhadas, linhas_codigo, bugs_corrigidos, id_user) VALUES
('Backend', 8, 450, 3, 1),
('Frontend', 6, 320, 1, 2),
('DevOps', 10, 200, 2, 3),
('Banco de Dados', 7, 150, 1, 4),
('Fullstack', 9, 600, 4, 5),
('Backend', 8, 480, 2, 6),
('Frontend', 5, 310, 1, 7),
('DevOps', 11, 220, 3, 8),
('Banco de Dados', 7, 190, 2, 9),
('Fullstack', 9, 540, 4, 10),
('Backend', 8, 470, 3, 11),
('Frontend', 6, 280, 2, 12),
('DevOps', 10, 210, 3, 13),
('Banco de Dados', 7, 160, 1, 14),
('Fullstack', 9, 580, 5, 15),
('Backend', 8, 490, 2, 16),
('Frontend', 5, 300, 1, 17),
('DevOps', 12, 240, 4, 18),
('Banco de Dados', 6, 170, 1, 19),
('Fullstack', 8, 550, 3, 20),
('Backend', 9, 460, 2, 21),
('Frontend', 6, 350, 1, 22),
('DevOps', 11, 210, 2, 23),
('Banco de Dados', 7, 180, 2, 24),
('Fullstack', 10, 600, 4, 25),
('Backend', 8, 500, 3, 26),
('Frontend', 7, 330, 2, 27),
('DevOps', 10, 220, 3, 28),
('Banco de Dados', 6, 160, 1, 29),
('Fullstack', 9, 570, 4, 30),
('Backend', 8, 480, 3, 31),
('Frontend', 6, 340, 2, 32),
('DevOps', 11, 230, 3, 33),
('Banco de Dados', 7, 180, 1, 34),
('Fullstack', 9, 590, 5, 35),
('Backend', 8, 460, 2, 36),
('Frontend', 5, 300, 1, 37),
('DevOps', 10, 210, 2, 38),
('Banco de Dados', 7, 170, 2, 39),
('Fullstack', 9, 550, 4, 40),
('Backend', 8, 490, 3, 41),
('Frontend', 6, 320, 1, 42),
('DevOps', 11, 240, 3, 43),
('Banco de Dados', 6, 190, 1, 44),
('Fullstack', 9, 600, 5, 45),
('Backend', 8, 480, 2, 46),
('Frontend', 7, 310, 1, 47),
('DevOps', 10, 250, 2, 48),
('Banco de Dados', 7, 180, 2, 49),
('Fullstack', 9, 570, 4, 50),
('Backend', 8, 470, 3, 51),
('Frontend', 6, 330, 2, 52),
('DevOps', 11, 210, 3, 53),
('Banco de Dados', 7, 160, 1, 54),
('Fullstack', 10, 590, 5, 55),
('Backend', 8, 450, 2, 56),
('Frontend', 6, 310, 1, 57),
('DevOps', 12, 230, 4, 58),
('Banco de Dados', 7, 170, 1, 59),
('Fullstack', 9, 600, 3, 60),
('Backend', 9, 480, 2, 61),
('Frontend', 7, 350, 2, 62),
('DevOps', 10, 210, 3, 63),
('Banco de Dados', 6, 180, 1, 64),
('Fullstack', 9, 570, 4, 65),
('Backend', 8, 490, 3, 66),
('Frontend', 6, 340, 2, 67),
('DevOps', 11, 230, 3, 68),
('Banco de Dados', 7, 180, 2, 69),
('Fullstack', 9, 590, 5, 70),
('Backend', 8, 460, 2, 71),
('Frontend', 5, 310, 1, 72),
('DevOps', 10, 220, 2, 73),
('Banco de Dados', 7, 160, 2, 74),
('Fullstack', 9, 550, 4, 75),
('Backend', 8, 490, 3, 76),
('Frontend', 6, 330, 2, 77),
('DevOps', 11, 210, 3, 78),
('Banco de Dados', 7, 170, 1, 79),
('Fullstack', 9, 580, 5, 80),
('Backend', 8, 470, 2, 81),
('Frontend', 6, 320, 2, 82),
('DevOps', 12, 240, 3, 83),
('Banco de Dados', 7, 190, 1, 84),
('Fullstack', 9, 600, 4, 85),
('Backend', 8, 480, 2, 86),
('Frontend', 7, 340, 1, 87),
('DevOps', 11, 230, 2, 88),
('Banco de Dados', 6, 170, 2, 89),
('Fullstack', 9, 590, 5, 90),
('Backend', 8, 450, 3, 91),
('Frontend', 6, 310, 1, 92),
('DevOps', 10, 250, 2, 93),
('Banco de Dados', 7, 180, 1, 94),
('Fullstack', 9, 560, 4, 95),
('Backend', 9, 470, 3, 96),
('Frontend', 6, 330, 2, 97),
('DevOps', 11, 220, 3, 98),
('Banco de Dados', 7, 160, 2, 99),
('Fullstack', 9, 580, 5, 100);

SELECT * FROM lgs;

CREATE TABLE `like` (
  log_id INT NOT NULL,
  user_id INT NOT NULL,
  KEY fk_log_idx (log_id),
  KEY fk_user_idx (user_id),
  CONSTRAINT fk_log 
      FOREIGN KEY (log_id) 
      REFERENCES lgs(id)
      ON DELETE CASCADE
      ON UPDATE CASCADE,
  CONSTRAINT fk_user 
      FOREIGN KEY (user_id) 
      REFERENCES usuario(id)
      ON DELETE CASCADE
      ON UPDATE CASCADE
);





SELECT * FROM lgs;
INSERT INTO `like` (log_id, user_id) VALUES
(1, 2),
(1, 5),
(2, 1),
(2, 3),
(3, 4),
(3, 6),
(4, 2),
(4, 7),
(5, 8),
(5, 9),
(6, 10),
(6, 11),
(7, 12),
(7, 13),
(8, 14),
(8, 15),
(9, 16),
(9, 17),
(10, 18),
(10, 19),
(11, 20),
(11, 21),
(12, 22),
(12, 23),
(13, 24),
(13, 25),
(14, 26),
(14, 27),
(15, 28),
(15, 29),
(16, 30),
(16, 31),
(17, 32),
(17, 33),
(18, 34),
(18, 35),
(19, 36),
(19, 37),
(20, 38),
(20, 39),
(21, 40),
(21, 41),
(22, 42),
(22, 43),
(23, 44),
(23, 45),
(24, 46),
(24, 47),
(25, 48),
(25, 49),
(26, 50),
(27, 51),
(28, 52),
(29, 53),
(30, 54),
(31, 55),
(32, 56),
(33, 57),
(34, 58),
(35, 59),
(36, 60),
(37, 61),
(38, 62),
(39, 63),
(40, 64),
(41, 65),
(42, 66),
(43, 67),
(44, 68),
(45, 69),
(46, 70),
(47, 71),
(48, 72),
(49, 73),
(50, 74),
(51, 75),
(52, 76),
(53, 77),
(54, 78),
(55, 79),
(56, 80),
(57, 81),
(58, 82),
(59, 83),
(60, 84),
(61, 85),
(62, 86),
(63, 87),
(64, 88),
(65, 89),
(66, 90),
(67, 91),
(68, 92),
(69, 93),
(70, 94),
(71, 95),
(72, 96),
(73, 97),
(74, 98),
(75, 99),
(76, 100),
(77, 1),
(78, 2),
(79, 3),
(80, 4),
(81, 5),
(82, 6),
(83, 7),
(84, 8),
(85, 9),
(86, 10),
(87, 11),
(88, 12),
(89, 13),
(90, 14),
(91, 15),
(92, 16),
(93, 17),
(94, 18),
(95, 19),
(96, 20),
(97, 21),
(98, 22),
(99, 23),
(100, 24);

SELECT * FROM `like`;
CREATE TABLE `comment` (
    id INT PRIMARY KEY AUTO_INCREMENT,
    id_log INT,
    id_user INT,
    comments VARCHAR(255),
    FOREIGN KEY (id_user)
        REFERENCES usuario(id)
        ON DELETE CASCADE
        ON UPDATE CASCADE,
    FOREIGN KEY (id_log)
        REFERENCES lgs(id)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);

INSERT INTO comment (id_log, id_user, comments) VALUES
(1, 2, 'Muito bom!'),
(2, 1, 'Ótima implementação.'),
(3, 4, 'Precisa melhorar a performance.'),
(4, 3, 'Gostei da organização do código.'),
(5, 5, 'Excelente documentação.'),
(6, 6, 'Pode ser otimizado.'),
(7, 7, 'Código limpo e claro.'),
(8, 8, 'Boa solução para o problema.'),
(9, 9, 'Alguns bugs ainda permanecem.'),
(10, 10, 'Muito útil, parabéns!'),
(11, 11, 'Gostei do uso das funções.'),
(12, 12, 'O design poderia ser melhor.'),
(13, 13, 'Testes cobrindo todos os casos.'),
(14, 14, 'Precisa de revisão.'),
(15, 15, 'Muito bem estruturado.'),
(16, 16, 'Código repetitivo em algumas partes.'),
(17, 17, 'Excelente uso de loops.'),
(18, 18, 'Pode adicionar comentários no código.'),
(19, 19, 'Funciona perfeitamente.'),
(20, 20, 'Sugiro refatorar algumas funções.'),
(21, 21, 'Gostei da clareza.'),
(22, 22, 'Código poderia ser mais modular.'),
(23, 23, 'Ótima lógica.'),
(24, 24, 'Documentação incompleta.'),
(25, 25, 'Muito bem pensado.'),
(26, 26, 'Sugiro usar mais variáveis significativas.'),
(27, 27, 'Testes automáticos ajudariam.'),
(28, 28, 'Código fácil de manter.'),
(29, 29, 'Pode melhorar a eficiência.'),
(30, 30, 'Estrutura clara e objetiva.'),
(31, 31, 'Muito bom, parabéns.'),
(32, 32, 'Código funciona, mas pode ser limpo.'),
(33, 33, 'Excelente uso de bibliotecas.'),
(34, 34, 'Alguns detalhes podem ser ajustados.'),
(35, 35, 'Muito bem documentado.'),
(36, 36, 'Otimização recomendada.'),
(37, 37, 'Gostei do padrão usado.'),
(38, 38, 'Funções bem definidas.'),
(39, 39, 'Pode simplificar algumas linhas.'),
(40, 40, 'Código legível e organizado.'),
(41, 41, 'Boa prática de programação.'),
(42, 42, 'Sugiro adicionar validações.'),
(43, 43, 'Muito bem implementado.'),
(44, 44, 'Algumas variáveis podem ser renomeadas.'),
(45, 45, 'Excelente lógica aplicada.'),
(46, 46, 'Funciona, mas testes faltam.'),
(47, 47, 'Código claro e direto.'),
(48, 48, 'Pode melhorar nomenclatura de funções.'),
(49, 49, 'Ótimo uso de arrays.'),
(50, 50, 'Sugiro modularizar mais.'),
(51, 51, 'Muito bom, fácil de entender.'),
(52, 52, 'Pode adicionar comentários explicativos.'),
(53, 53, 'Boa abordagem para o problema.'),
(54, 54, 'Código está funcional.'),
(55, 55, 'Excelente trabalho.'),
(56, 56, 'Alguns ajustes podem ser feitos.'),
(57, 57, 'Muito bem estruturado.'),
(58, 58, 'Sugiro revisão de algumas funções.'),
(59, 59, 'Código limpo e funcional.'),
(60, 60, 'Pode melhorar performance em loops.'),
(61, 61, 'Boa implementação.'),
(62, 62, 'Sugiro padronizar nomes de variáveis.'),
(63, 63, 'Muito bom, parabéns.'),
(64, 64, 'Código funcional e claro.'),
(65, 65, 'Ótima documentação.'),
(66, 66, 'Pode refatorar funções repetitivas.'),
(67, 67, 'Muito bem implementado.'),
(68, 68, 'Código poderia ser modularizado.'),
(69, 69, 'Excelente lógica.'),
(70, 70, 'Testes adicionais seriam úteis.'),
(71, 71, 'Muito bom, claro e legível.'),
(72, 72, 'Sugiro ajustes nos loops.'),
(73, 73, 'Ótimo trabalho.'),
(74, 74, 'Código funcional, mas pode ser otimizado.'),
(75, 75, 'Excelente organização.'),
(76, 76, 'Pode melhorar variáveis.'),
(77, 77, 'Muito bom, fácil de manter.'),
(78, 78, 'Sugiro adicionar validações.'),
(79, 79, 'Boa implementação.'),
(80, 80, 'Código claro e eficiente.'),
(81, 81, 'Excelente solução.'),
(82, 82, 'Pode modularizar algumas funções.'),
(83, 83, 'Muito bom, parabéns.'),
(84, 84, 'Alguns ajustes podem melhorar performance.'),
(85, 85, 'Ótima lógica.'),
(86, 86, 'Sugiro revisar variáveis.'),
(87, 87, 'Código legível e funcional.'),
(88, 88, 'Muito bom, ótimo trabalho.'),
(89, 89, 'Pode adicionar mais comentários.'),
(90, 90, 'Excelente documentação.'),
(91, 91, 'Código limpo e claro.'),
(92, 92, 'Sugiro melhorias em loops.'),
(93, 93, 'Muito bom, funcional.'),
(94, 94, 'Pode modularizar funções.'),
(95, 95, 'Ótima implementação.'),
(96, 96, 'Código está funcional.'),
(97, 97, 'Excelente lógica aplicada.'),
(98, 98, 'Sugiro ajustes em funções repetitivas.'),
(99, 99, 'Muito bem estruturado.'),
(100, 100, 'Parabéns, trabalho excelente!');




SELECT distinct(categoria) FROM lgs;


SELECT 
  lgs.id,
  lgs.categoria,
  lgs.horas_trabalhadas,
  lgs.linhas_codigo,
  lgs.bugs_corrigidos,
  (SELECT COUNT(*) FROM senai.like WHERE senai.like.log_id = lgs.id) AS likes,
  (SELECT COUNT(*) FROM senai.comment WHERE senai.comment.id_log = lgs.id) AS qnt_comments
FROM
  senai.lgs
ORDER BY 
  lgs.id ASC
LIMIT 10
OFFSET 0;
